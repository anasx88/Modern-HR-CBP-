<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø§Ù„Ø£Ø¬ÙˆØ±ØŒ Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚Ø§ØªØŒ ÙˆØ­Ø³Ø§Ø¨Ø§Øª Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø®Ø¯Ù…Ø©</title>

  <style>
    :root{
      /* Consultant-Grade Visual Spec v1.0 */
      --primary: #0F2A44;
      --secondary: #3A5F8A;
      --success: #2F7D5A;
      --alert: #B23A3A;

      --bg: #F7F9FC;
      --surface: #FFFFFF;
      --text: #1F2937;
      --muted: #6B7280;
      --border: #E5E7EB;

      --radius: 14px;
      --shadow: 0 10px 24px rgba(15,42,68,.08);
      --shadow2: 0 6px 14px rgba(15,42,68,.07);

      --maxw: 1200px;
      --gap: 18px;

      --font: "Cairo","Tajawal",system-ui,-apple-system,"Segoe UI",Arial,sans-serif;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--font);
      background: var(--bg);
      color: var(--text);
      line-height: 1.85;
    }

    .wrap{
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 26px 18px 36px;
    }

    /* ===== Header (Card / Cover Block) ===== */
    .header-card{
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 28px 32px;
      margin-bottom: 16px;
      position: relative;
      overflow: hidden;
    }
    .header-card:before{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(135deg, rgba(15,42,68,.06), rgba(58,95,138,.04));
      pointer-events:none;
    }
    .header-inner{ position:relative; }

    #appTitle{
      margin:0;
      font-size: 30px;
      font-weight: 800;
      color: var(--primary);
      letter-spacing: .2px;
      text-align:center;
    }
    #appSubtitle{
      margin: 8px 0 0;
      font-size: 15px;
      color: var(--muted);
      text-align:center;
    }
    .header-divider{
      margin: 18px auto 0;
      height: 1px;
      width: min(720px, 92%);
      background: var(--border);
    }

    /* ===== Tabs ===== */
    .tabs{
      margin-top: 16px;
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      justify-content: center;
    }
    .tab-btn{
      border: 1px solid var(--border);
      background: #fff;
      color: var(--primary);
      padding: 9px 14px;
      border-radius: 999px;
      cursor: pointer;
      font: inherit;
      font-size: 13px;
      transition: background .15s ease, border-color .15s ease;
    }
    .tab-btn:hover{
      background: rgba(15,42,68,.04);
      border-color: rgba(15,42,68,.20);
    }
    .tab-btn[aria-selected="true"]{
      background: rgba(15,42,68,.08);
      border-color: rgba(15,42,68,.30);
      font-weight: 800;
    }

    /* ===== Layout (Sidebar + Content) ===== */
    .layout{
      display:grid;
      grid-template-columns: 300px 1fr; /* sidebar on the right (RTL) */
      gap: var(--gap);
      align-items:start;
      margin-top: 14px;
    }

    /* ===== Sidebar ===== */
    aside{
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 14px;
      position: sticky;
      top: 14px;
    }

    .side-head{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 12px;
    }
    .side-title{
      margin:0;
      font-size: 13px;
      font-weight: 900;
      color: var(--primary);
    }

    .side-actions{
      display:flex;
      gap: 10px;
      margin-bottom: 12px;
    }
    .btn{
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #fff;
      color: var(--primary);
      font: inherit;
      font-size: 13px;
      cursor: pointer;
      transition: background .15s ease, border-color .15s ease;
    }
    .btn:hover{
      background: rgba(15,42,68,.04);
      border-color: rgba(15,42,68,.20);
    }

    #sidebarTOC{
      list-style:none;
      margin:0;
      padding:0;
      display:flex;
      flex-direction: column;
      gap: 8px;
    }
    #sidebarTOC a{
      display:block;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #fff;
      color: var(--text);
      text-decoration:none;
      font-size: 13px;
      transition: background .15s ease, border-color .15s ease;
    }
    #sidebarTOC a:hover{
      background: rgba(15,42,68,.04);
      border-color: rgba(15,42,68,.20);
    }

    #sidebarTOC a[aria-current="page"]{
      background: rgba(15,42,68,.08);
      border-color: rgba(15,42,68,.30);
      font-weight: 800;
    }
    .side-note{
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
    }

    /* ===== Content Cards ===== */
    main{ min-width: 0; }

    .card{
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 22px 22px 18px;
      margin-bottom: 14px;
    }
    .card h2{
      margin: 0 0 10px;
      font-size: 20px;
      font-weight: 900;
      color: var(--secondary);
    }
    .card p{ margin: 10px 0; }

    .badges{ display:flex; flex-wrap:wrap; gap: 8px; margin: 10px 0 8px; }
    .badge{
      font-size: 12px;
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(15,42,68,.03);
      color: var(--primary);
      font-weight: 700;
    }

    /* ===== Inline Callouts (place where needed) ===== */
    .callout{
      margin: 14px 0;
      padding: 14px 16px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #fff;
    }
    .callout .label{
      font-weight: 900;
      font-size: 13px;
      margin-bottom: 8px;
    }
    .callout ul{ margin:0; padding-right: 18px; }

    .callout-danger{
      background: rgba(178,58,58,0.08);
      border-color: rgba(178,58,58,0.25);
      border-right: 4px solid var(--alert);
    }
    .callout-danger .label{ color: #7A1F1F; }

    .callout-success{
      background: rgba(47,125,90,0.08);
      border-color: rgba(47,125,90,0.25);
      border-right: 4px solid var(--success);
    }
    .callout-success .label{ color: #1F5B43; }

    .callout-info{
      background: rgba(58,95,138,0.08);
      border-color: rgba(58,95,138,0.22);
      border-right: 4px solid var(--secondary);
    }
    .callout-info .label{ color: var(--primary); }

    /* ===== Steps ===== */
    .steps-title{
      margin: 16px 0 8px;
      font-weight: 900;
      color: var(--primary);
    }
    .steps{
      margin: 0;
      padding-right: 22px;
    }
    .steps li{ margin: 6px 0; }

    /* ===== Tables ===== */
    table{
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0;
      font-size: 13px;
    }
    th,td{
      border: 1px solid var(--border);
      padding: 10px 10px;
      vertical-align: top;
    }
    th{
      background: rgba(15,42,68,.03);
      font-weight: 900;
      color: var(--primary);
    }

    /* ===== Infographic (LAST inside unit) ===== */
    .infographic{
      margin-top: 16px;
      padding-top: 12px;
      border-top: 1px dashed var(--border);
      color: var(--muted);
      font-size: 13px;
    }
    .infographic .cap{
      font-weight: 900;
      margin-bottom: 8px;
      color: var(--muted);
    }
    .infographic img{
      width: 100%;
      height: auto;
      border-radius: 12px;
      border: 1px solid var(--border);
      display:block;
      background: #fff;
    }
    .infographic .hint{ margin-top: 8px; }

    /* ===== Signature Authority Block (in place / end) ===== */
    .signature-card{
      background: var(--surface);
      border: 1px solid var(--border);
      border-top: 4px solid var(--primary);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 22px 18px;
      text-align: center;
      margin-top: 18px;
    }
    .signature-card .label{
      font-size: 13px;
      color: var(--muted);
      font-weight: 900;
      margin-bottom: 6px;
    }
    .signature-card .name{
      font-size: 20px;
      font-weight: 900;
      color: var(--primary);
      margin: 0 0 2px;
    }
    .signature-card .contact{
      font-size: 15px;
      margin: 0;
      color: var(--text);
    }

    /* ===== Responsive ===== */
    @media (max-width: 980px){
      .layout{ grid-template-columns: 1fr; }
      aside{ position: static; }
      .header-card{ padding: 22px 18px; }
      #appTitle{ font-size: 24px; }
    }

    /* ===== Print ===== */
    @media print{
      body{ background:#fff !important; color:#000 !important; }
      .wrap{ max-width: none; padding: 0; }
      .layout{ grid-template-columns: 1fr; gap: 0; margin-top: 10px; }
      aside{ display:none !important; }          /* Sidebar hidden */
      .tabs{ display:none !important; }          /* Tabs hidden */
      .header-card{ box-shadow:none !important; }
      .card,.signature-card{
        box-shadow:none !important;
        break-inside: avoid;
        page-break-inside: avoid;
      }
      table{
        break-inside: avoid;
        page-break-inside: avoid;
      }
      h2, .steps-title{
        break-after: avoid;
        page-break-after: avoid;
      }
      @page{ size: A4; margin: 14mm; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- HEADER (Anchors for Injection) -->
    <section class="header-card" aria-label="header">
      <div class="header-inner">
        <h1 id="appTitle">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ</h1>
        <p id="appSubtitle"></p>
        <div class="header-divider"></div>
      </div>
    </section>

    <!-- LAYOUT -->
    <section class="layout">

      <!-- SIDEBAR -->
      <aside aria-label="sidebar">
        <div class="side-head">
          <p class="side-title">Ø§Ù„ÙˆØ­Ø¯Ø§Øª</p>
        </div>

        <div class="side-actions">
          <button class="btn" id="printBtn" type="button">Ø·Ø¨Ø§Ø¹Ø© PDF</button>
        </div>

        <ul id="sidebarTOC" aria-label="table of contents"></ul>

        <div class="side-note">* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ ÙˆØ²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙŠØ®ØªÙÙŠØ§Ù† ØªÙ…Ø§Ù…Ù‹Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©.</div>
      </aside>

      <!-- CONTENT -->
      <main aria-label="content">
        <div id="contentContainer"></div>
        <div id="infographicContainer"></div>

        

        <!-- SIGNATURE (Fixed place / end) -->
        <div class="signature-card" aria-label="signature">
          <div class="label">ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨ÙˆØ§Ø³Ø·Ø©</div>
          <div class="name">Ø£Ù†Ø³ Ø§Ù„Ø¹Ø¶ÙŠØ¨ÙŠ</div>
          <p class="contact">0505530803</p>
        </div>
      </main>

    </section>
  </div>

  <script>
    /*****************************************************************
     * Template Data Contract v1.0 (Inline Edition)
     *
     * mode: "days" | "modules"   => Tabs labels only
     * tabs: [{ id, label, sections:[...] }]
     *
     * SECTION:
     * - id, title
     * - unitName: used for Infographic file: assets/<unitName>.png
     * - badges: ["Required", ...] (optional)
     * - steps: [ ... ] (optional)
     * - bodyHtml: (required) you place inline callouts anywhere here
     * - infographic: true/false (if true => appended LAST inside the unit)
     *
     * Inline callouts (use inside bodyHtml):
     *  - <div class="callout callout-danger">...</div>
     *  - <div class="callout callout-success">...</div>
     *****************************************************************/

    const TEMPLATE_DATA = {
  "mode": "modules",
  "title": "Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø§Ù„Ø£Ø¬ÙˆØ±ØŒ Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚Ø§ØªØŒ ÙˆØ­Ø³Ø§Ø¨Ø§Øª Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø®Ø¯Ù…Ø©",
  "subtitle": "",
  "tabs": [
    {
      "id": "u3",
      "label": "Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø§Ù„Ø£Ø¬ÙˆØ±ØŒ Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚Ø§ØªØŒ ÙˆØ­Ø³Ø§Ø¨Ø§Øª Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø®Ø¯Ù…Ø©",
      "sections": [
        {
          "id": "u3_main",
          "title": "Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø§Ù„Ø£Ø¬ÙˆØ±ØŒ Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚Ø§ØªØŒ ÙˆØ­Ø³Ø§Ø¨Ø§Øª Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø®Ø¯Ù…Ø©",
          "unitName": "Ø§Ù„ÙˆØ­Ø¯Ø©_Ø§Ù„Ø«Ø§Ù„Ø«Ø©",
          "badges": [],
          "steps": [],
          "bodyHtml": "<div class=\"callout callout-info\">\n<div class=\"label\">Learning Objectives (Recap)</div>\n<ul>\n<li>Ø§Ù„ØªÙ…ÙŠÙŠØ² Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¬Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ÙˆØ§Ù„Ø£Ø¬Ø± Ø§Ù„ÙØ¹Ù„ÙŠ ÙˆØ¢Ø«Ø§Ø± ÙƒÙ„ Ù…Ù†Ù‡Ù…Ø§.</li>\n<li>ÙÙ‡Ù… Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ ÙˆØ§Ø­ØªØ³Ø§Ø¨Ù‡.</li>\n<li>ØªÙØ³ÙŠØ± Ù…Ù†Ø·Ù‚ Ù…ÙƒØ§ÙØ£Ø© Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø®Ø¯Ù…Ø© Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³ØªÙ‚Ø§Ù„Ø©/Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡.</li>\n</ul></div>\n<h3 class=\"steps-title\">Core Content</h3>\n<p>Ù…Ø­ÙˆØ± Ø§Ù„Ø£Ø¬ÙˆØ± Ù‡Ùˆ Ø§Ù„Ø£ÙƒØ«Ø± Ø­Ø³Ø§Ø³ÙŠØ©. Ø§Ù„ØªÙØ±ÙŠÙ‚ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¬Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ÙˆØ§Ù„Ø£Ø¬Ø± Ø§Ù„ÙØ¹Ù„ÙŠ Ø¬ÙˆÙ‡Ø±ÙŠ Ù„Ø£Ù† ÙƒØ«ÙŠØ±Ù‹Ø§ Ù…Ù† Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ØªØ±ØªØ¨Ø· Ø¨Ø§Ù„Ø£Ø¬Ø± Ø§Ù„ÙØ¹Ù„ÙŠ (Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ù„Ø¨Ø¯Ù„Ø§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ©).</p>\n<p>ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ: Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø£Ù† Ø£Ø¬Ø± Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© = Ø£Ø¬Ø± Ø§Ù„Ø³Ø§Ø¹Ø© + Ø²ÙŠØ§Ø¯Ø© Ù†Ø¸Ø§Ù…ÙŠØ© (Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø£Ø¬Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ). Ø§Ù„ØªÙƒÙ„ÙŠÙ Ø§Ù„Ù…ÙØªÙˆØ­ Ø¯ÙˆÙ† Ø³Ù‚Ù ÙŠØ­ÙˆÙ‘Ù„ Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø¥Ù„Ù‰ Ø¹Ø¨Ø¡ Ù…ØªØ±Ø§ÙƒÙ….</p>\n<p>ÙÙŠ Ù…ÙƒØ§ÙØ£Ø© Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø®Ø¯Ù…Ø©: Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚ Ù…Ø±ØªØ¨Ø· Ø¨Ø§Ù„Ù…Ø¯Ø© ÙˆÙ†ÙˆØ¹ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©. ÙÙŠ Ø§Ù„Ø§Ø³ØªÙ‚Ø§Ù„Ø© Ø®ØµÙˆØµÙ‹Ø§ØŒ Ø§Ù„Ù…Ø¯Ø© Ø´Ø±Ø· Ø­Ø§ÙƒÙ….</p>\n<h3 class=\"steps-title\">Ù‚ØµØµ ØªØ·Ø¨ÙŠÙ‚ÙŠØ© ÙˆØªÙˆØ¶ÙŠØ­ÙŠØ©</h3><div class=\"callout callout-info\"><div class=\"label\">Ù‚ØµØ© ØªØ·Ø¨ÙŠÙ‚ÙŠØ© â€” Ø®Ø·Ø§Ø¨ Ø§Ù„ØªÙƒÙ„ÙŠÙ Ø§Ù„Ù…ÙØªÙˆØ­</div><p><strong>Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙŠ Ø§Ø³ØªÙ†Ø¯Øª Ø¹Ù„ÙŠÙ‡:</strong> Ø§Ù„Ø£Ø¬ÙˆØ± ÙˆØ§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ</p><p><strong>Ø§Ù„Ù‚ØµØ©:</strong> Ø£Ø±Ø³Ù„Øª Ø´Ø±ÙƒØ© Ù…Ø¹Ø¯Ø§Øª Ø«Ù‚ÙŠÙ„Ø© Ø®Ø·Ø§Ø¨ ØªÙƒÙ„ÙŠÙ Ù…ÙØªÙˆØ­ Ù„Ù…ÙˆØ¸Ù Ø¯ÙˆÙ† ØªØ­Ø¯ÙŠØ¯ Ù…Ø¯Ø© Ø£Ùˆ Ø³Ø§Ø¹Ø§ØªØŒ ÙØ¨ØµÙ… Ø¥Ø¶Ø§ÙÙŠ Ø³Ù†Ø© ÙƒØ§Ù…Ù„Ø©ØŒ ÙˆØ­ÙƒÙ…Øª Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ù„Ù‡ Ø¨Ù€600,000 Ø±ÙŠØ§Ù„.</p><p><strong>Ù…Ø§Ø°Ø§ Ù†Ø³ØªÙÙŠØ¯ Ù…Ù† Ø§Ù„Ù‚ØµØ©:</strong> Ø§Ù„ØºÙ…ÙˆØ¶ ÙÙŠ Ø§Ù„ØªÙƒÙ„ÙŠÙ Ù…ÙƒÙ„Ù Ù…Ø§Ù„ÙŠÙ‹Ø§.</p></div><div class=\"callout callout-danger\">\n<div class=\"label\">ØªÙ†Ø¨ÙŠÙ‡ â€” Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡ Ù„Ù‡Ø§</div>\n<ul>\n<li>Ø§Ù„Ø®Ù„Ø· Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¬Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ÙˆØ§Ù„ÙØ¹Ù„ÙŠ ÙŠØ³Ø¨Ø¨ Ø³Ù„Ø³Ù„Ø© Ø£Ø®Ø·Ø§Ø¡ Ù…Ø§Ù„ÙŠØ© Ù…Ø¶Ø§Ø¹ÙØ©.</li>\n</ul></div>\n<div class=\"callout callout-success\">\n<div class=\"label\">ØªØ±ÙƒÙŠØ² â€” Ù†Ù‚Ø§Ø· ÙŠØ¬Ø¨ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„ÙŠÙ‡Ø§</div>\n<ul>\n<li>Ø§Ø¹ØªÙ…Ø§Ø¯ ØªØ¹Ø±ÙŠÙ Ù…ÙˆØ­Ù‘Ø¯ Ù„Ù„Ø£Ø¬Ø± Ø§Ù„ÙØ¹Ù„ÙŠ Ø¯Ø§Ø®Ù„ÙŠÙ‹Ø§.</li>\n<li>ØªØ­Ø¯ÙŠØ¯ Ø³Ù‚Ù Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ ÙƒØªØ§Ø¨ÙŠÙ‹Ø§.</li>\n<li>Ø±Ø¨Ø· Ù†ÙˆØ¹ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ù…Ù†Ù‡Ø¬ÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ØµØ­ÙŠØ­Ø©.</li>\n</ul></div>\n<h3 class=\"steps-title\">Key Takeaways</h3>\n<ul>\n<li>Ø§Ù„Ø£Ø¬Ø± Ø§Ù„ÙØ¹Ù„ÙŠ Ø£Ø³Ø§Ø³ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠ.</li>\n<li>ØªÙƒÙ„ÙŠÙ Ø¥Ø¶Ø§ÙÙŠ Ø¨Ù„Ø§ Ø³Ù‚Ù = Ù…Ø®Ø§Ø·Ø±Ø© Ù…Ø§Ù„ÙŠØ© Ù…ÙØªÙˆØ­Ø©.</li>\n<li>Ù…ÙƒØ§ÙØ£Ø© Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø®Ø¯Ù…Ø© Ø­Ù‚ Ù…Ù‚ÙŠØ¯ Ø¨Ø´Ø±ÙˆØ· Ø²Ù…Ù†ÙŠØ©.</li>\n<li>Ø£Ø®Ø·Ø§Ø¡ ØµØºÙŠØ±Ø© Ù‚Ø¯ ØªØªØ­ÙˆÙ„ Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª ÙƒØ¨ÙŠØ±Ø©.</li>\n</ul>",
          "infographic": true
        }
      ]
    }
  ]
};

    const elTitle = document.getElementById("appTitle");
    const elSubtitle = document.getElementById("appSubtitle");
    const elTOC = document.getElementById("sidebarTOC");
    const elContent = document.getElementById("contentContainer");
    const elInf = document.getElementById("infographicContainer");
    document.getElementById("printBtn").addEventListener("click", () => window.print());

    const sanitizeId = (id) => String(id).replace(/[^a-zA-Z0-9_-]/g, "_");

    function renderApp(data){
  elTitle.textContent = data.title || "";
  elSubtitle.textContent = data.subtitle || "";
  elSubtitle.style.display = (data.subtitle ? "block" : "none");
  if (!data.subtitle) { elSubtitle.style.display = "none"; } else { elSubtitle.style.display = "block"; }
  if (!elSubtitle.textContent.trim()) { elSubtitle.style.display = "none"; }
  const tab = (data.tabs || [])[0];
  if (tab){
    renderContent(tab);
  }
  renderTOC();
}

    function renderTOC(){
  elTOC.innerHTML = '<li><a href="index.html" >Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠ Ø§Ù„Ø¹Ù…Ø§Ù„ÙŠ</a></li><li><a href="unit2.html" >Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯ ÙˆØ§Ù„Ù…Ø¯Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠØ©</a></li><li><a href="unit3.html" aria-current="page">Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø§Ù„Ø£Ø¬ÙˆØ±ØŒ Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚Ø§ØªØŒ ÙˆØ­Ø³Ø§Ø¨Ø§Øª Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø®Ø¯Ù…Ø©</a></li><li><a href="unit4.html" >Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©: Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙˆØ§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠØ©</a></li><li><a href="unit5.html" >Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø®Ø§Ù…Ø³Ø©: Ø§Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ ÙˆØ§Ù„Ø­ÙˆÙƒÙ…Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©</a></li><li><a href="unit6.html" >Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø³Ø§Ø¯Ø³Ø©: Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ø¹Ù…Ø§Ù„ÙŠØ©</a></li>';
}

    function makeBadges(badges){
      if (!badges || !badges.length) return null;
      const wrap = document.createElement("div");
      wrap.className = "badges";
      badges.forEach(txt => {
        const s = document.createElement("span");
        s.className = "badge";
        s.textContent = txt;
        wrap.appendChild(s);
      });
      return wrap;
    }

    function makeSteps(steps){
      if (!steps || !steps.length) return null;
      const title = document.createElement("div");
      title.className = "steps-title";
      title.textContent = "Ø§Ù„ØªØ³Ù„Ø³Ù„ Ø§Ù„Ù…Ù†Ù‡Ø¬ÙŠ";

      const ol = document.createElement("ol");
      ol.className = "steps";
      steps.forEach(s => {
        const li = document.createElement("li");
        li.textContent = s;
        ol.appendChild(li);
      });

      const wrap = document.createElement("div");
      wrap.appendChild(title);
      wrap.appendChild(ol);
      return wrap;
    }

    function makeInfographic(unitName){
      const box = document.createElement("div");
      box.className = "infographic";

      const cap = document.createElement("div");
      cap.className = "cap";
      cap.textContent = "ğŸ“Œ Ø§Ù„Ø¥Ù†ÙÙˆØ¬Ø±Ø§ÙÙŠÙƒ (Infographic)";

      const img = document.createElement("img");
      img.alt = "Infographic â€” " + unitName;
      img.src = "assets/" + unitName + ".png";

      const hint = document.createElement("div");
      hint.className = "hint";
      hint.textContent = "Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: assets/" + unitName + ".png";

      img.addEventListener("error", () => {
        img.style.display = "none";
        hint.textContent = "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø©: assets/" + unitName + ".png";
      });

      box.appendChild(cap);
      box.appendChild(img);
      box.appendChild(hint);
      return box;
    }

    function renderContent(tab){
      elContent.innerHTML = "";
      (tab.sections || []).forEach(sec => {
        const card = document.createElement("section");
        card.className = "card";
        card.id = sanitizeId(sec.id);

        const h2 = document.createElement("h2");
        h2.textContent = sec.title;
        card.appendChild(h2);

        const badges = makeBadges(sec.badges);
        if (badges) card.appendChild(badges);

        // bodyHtml (Inline callouts live here)
        const body = document.createElement("div");
        body.innerHTML = sec.bodyHtml || "";
        card.appendChild(body);

        // steps (optional)
        const steps = makeSteps(sec.steps);
        if (steps) card.appendChild(steps);

        elContent.appendChild(card);
      });

      // Infographic section (fixed: before signature)
      const first = (tab.sections || [])[0] || {};
      const unit = first.unitName || sanitizeId(first.id || tab.id || 'unit');
      elInf.innerHTML = '';
      const infCard = document.createElement('section');
      infCard.className = 'card';
      infCard.appendChild(makeInfographic(unit));
      elInf.appendChild(infCard);

    }


    renderApp(TEMPLATE_DATA);
  </script>
</body>
</html>
